{#def project=False #}

{% set action = "hx-patch=/app/projects/" + project.id if project else "hx-post=/app/projects" %}
<dialog id="modal">
    <article style="max-width: 600px">
        <header>
            <button aria-label="Close" rel="prev" onclick="modal.close()"></button>
            <hgroup>
                <h4 style="padding:6px 0">Create a new endpoint</h4>
                <p>Define a new endpoint to be used by the API</p>
            </hgroup>
        </header>
        <form {{ action }} hx-target="body" hx-push-url="true">
            <div>
                <label><strong>Endpoint Name</strong></label>
                <input required name="name" value="{% if project %}{{ project.name }}{% endif %}">
                <label><strong>Instructions</strong></label>
                <textarea required name="instructions">{% if project %}{{ project.instructions }}{% endif %}</textarea>
            </div>
            <section class="grid" style="margin-bottom:11px">
                {% if project %}
                <ParamGroup type="Request" data={project.request} />
                <ParamGroup type="Response" data={project.response} />
                {% else %}
                <ParamGroup type="Request" />
                <ParamGroup type="Response" />
                {% endif %}
            </section>
            <Settings />
            <input class="contrast" type="submit"
                value="{% if project %}Update Endpoint{% else %}Create Endpoint{% endif %}" onclick="modal.close()"
                style="margin-bottom: 0px">
        </form>
    </article>
</dialog>